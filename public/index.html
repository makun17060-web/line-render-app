<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ã”æ³¨æ–‡æ–¹æ³•é¸æŠ</title>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <style>
    :root{
      --bg:#f6f7f9; --card:#fff; --text:#111827; --muted:#6b7280; --line:#e5e7eb;
      --akasha:#0b3a53; --original:#7a1f1f; --store:#0a7b19;
      --shadow:0 1px 4px rgba(0,0,0,.08); --radius:16px;
      --danger:#b91c1c;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{ max-width:760px; margin:0 auto; padding:16px 14px 30px; }
    h1{ margin:0 0 6px; font-size:20px; }
    .muted{ color:var(--muted); font-size:13px; line-height:1.6; }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
      margin-top:14px;
    }
    .btn{
      display:block; width:100%;
      padding:16px 14px;
      border-radius:14px;
      font-weight:900; font-size:16px;
      text-align:center; text-decoration:none;
      border:none; cursor:pointer;
      user-select:none;
    }
    .btnOriginal{ background:var(--original); color:#fff; }
    .btnAkasha{ background:var(--akasha); color:#fff; }
    .btnStore{ background:var(--store); color:#fff; }

    .note{ margin-top:10px; font-size:13px; color:#374151; }
    .sub{ margin-top:6px; font-size:12px; color:var(--muted); }
    .pill{
      display:inline-block; margin-top:8px;
      font-size:12px; padding:2px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fafafa; color:#374151;
    }
    .warn{ color:var(--danger); font-weight:900; }
    .small{ font-size:12px; color:var(--muted); margin-top:14px; }
    .hr{ height:1px; background:var(--line); margin:14px 0; }

    .badge{
      display:inline-block;
      font-size:12px;
      padding:3px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      margin-left:8px;
      vertical-align:middle;
    }
    .badgeStore{ border-color:#bbf7d0; background:#f0fdf4; color:#166534; font-weight:800; }
    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>
      ã”æ³¨æ–‡ã¯ã“ã¡ã‚‰
      <span id="modeBadge" class="badge hidden"></span>
    </h1>
    <div class="muted" id="leadText">
      ã”å¸Œæœ›ã®å•†å“ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
    </div>

    <!-- ğŸ ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚»ãƒƒãƒˆ -->
    <div class="card" id="cardOriginal">
      <a class="btn btnOriginal" href="#" id="goOriginal">ğŸ ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚»ãƒƒãƒˆã‚’è³¼å…¥</a>
      <div class="note">è©°ã‚åˆã‚ã›å•†å“ãƒ»è´ˆç­”å‘ã‘</div>
      <div class="sub">
        <span class="warn">â€» å˜å“ï¼ˆã‚ã‹ã—ã‚ƒã‚·ãƒªãƒ¼ã‚ºç­‰ï¼‰ã¨ã®æ··è¼‰ã¯ã§ãã¾ã›ã‚“</span>
      </div>
      <div class="pill">æ•°é‡ã§é€æ–™ã‚µã‚¤ã‚ºãŒå¤‰ã‚ã‚Šã¾ã™</div>
      <div class="small">
        é€æ–™ã‚µã‚¤ã‚ºï¼š1å€‹â†’80 / 2å€‹â†’100 / 3ï½4å€‹â†’120 / 5ï½6å€‹â†’140
      </div>
    </div>

    <!-- ğŸ˜ ã‚ã‹ã—ã‚ƒã‚·ãƒªãƒ¼ã‚º -->
    <div class="card" id="cardAkasha">
      <a class="btn btnAkasha" href="#" id="goAkasha">ğŸ˜ ã‚ã‹ã—ã‚ƒã‚·ãƒªãƒ¼ã‚ºã‚’è³¼å…¥</a>
      <div class="note">å˜å“ãƒ»çµ„ã¿åˆã‚ã›è‡ªç”±ï¼ˆæ··è¼‰OKï¼‰</div>
      <div class="sub">ä¹…åŠ©ã‚‚ã‚·ãƒªãƒ¼ã‚ºæ‰±ã„ã§åŒæ¢±ã§ãã¾ã™</div>
      <div class="pill">ã‚«ãƒ¼ãƒˆ â†’ ä½æ‰€å…¥åŠ› â†’ æ³¨æ–‡ç¢ºå®š</div>
    </div>

    <!-- ğŸ  åº—èˆ—å—å–ï¼ˆç¾é‡‘ï¼‰ -->
    <div class="card hidden" id="cardStore">
      <a class="btn btnStore" href="#" id="goStore">ğŸ  åº—èˆ—å—å–ï¼ˆç¾é‡‘ï¼‰ã§æ³¨æ–‡ã™ã‚‹</a>
      <div class="note">é€æ–™ãªã—ãƒ»ä½æ‰€å…¥åŠ›ãªã—ãƒ»åº—é ­ã§ç¾é‡‘æ‰•ã„</div>
      <div class="sub">åº—èˆ—ã§ã€ŒLINEæ³¨æ–‡ã§ã™ã€ã¨ãŠä¼ãˆãã ã•ã„</div>
      <div class="pill">ã‚«ãƒ¼ãƒˆ â†’ æ³¨æ–‡ç¢ºå®šï¼ˆç¾é‡‘ï¼‰</div>
    </div>

    <div class="hr"></div>

    <div class="small">
      â€» æœ¬ç”»é¢ã‹ã‚‰ã®é·ç§»ã¯ã™ã¹ã¦ <b>LIFFå…¬å¼URLï¼ˆliff.line.meï¼‰</b> ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚<br>
      LINEä»•æ§˜ã«æº–æ‹ ã—ã¦ã„ã‚‹ãŸã‚ã€400ã‚¨ãƒ©ãƒ¼ã‚’é¿ã‘ã‚„ã™ããªã‚Šã¾ã™ã€‚
    </div>
  </div>

<script>
(function(){
  "use strict";

  /**
   * âœ… ã“ã“ãŒè‚ï¼šLIFFã§ã€Œåº—èˆ—å—å–ã‹ã©ã†ã‹ã€ã‚’åˆ¤å®šã—ã¦åˆ†å²
   *
   * æ–¹é‡ï¼š
   * - index.html ã¯é€šå¸¸URLã§é–‹ã„ã¦ã‚‚OKï¼ˆliff.init å¤±æ•— â†’ é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
   * - LIFFå†…ã§é–‹ã‹ã‚ŒãŸå ´åˆã¯ã€è¤‡æ•° liffId ã‚’é †ç•ªã« init ã—ã¦
   *   ã€ŒæˆåŠŸã—ãŸ liffIdã€ã«ã‚ˆã£ã¦ mode ã‚’æ±ºå®šã™ã‚‹
   *
   * ã“ã‚Œã§ URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«é ¼ã‚‰ãšã€Œã©ã®LIFFã§èµ·å‹•ã•ã‚ŒãŸã‹ã€ã‚’åˆ¤å®šã§ãã¾ã™ã€‚
   */

  // â–¼ã‚ãªãŸã® LIFF URLï¼ˆç¢ºå®šï¼‰
  const LIFF_URL_ORIGINAL = "https://liff.line.me/2008406620-Bd9Zo9od";
  const LIFF_URL_AKASHA   = "https://liff.line.me/2008406620-G5j1gjzM";

  // â–¼åº—èˆ—å—å–ç”¨ã® LIFF URLï¼ˆã‚ãªãŸã®å®ŸIDã«å·®ã—æ›¿ãˆï¼‰
  // ä¾‹: https://liff.line.me/2008406620-xxxxxxxx
  const LIFF_URL_STORE    = "https://liff.line.me/2008406620-7tSkOcqd";

  /**
   * â–¼åˆ¤å®šã«ä½¿ã† LIFF_ID ç¾¤ï¼ˆã€Œã©ã‚Œã§é–‹ã‹ã‚Œã¦ã„ã‚‹ã‹ã€ã‚’ç‰¹å®šã™ã‚‹ï¼‰
   * - ã“ã“ã¯ .env ã®å€¤ï¼ˆLIFF_ID_ORDER / LIFF_ID_ADDRESS / LIFF_ID_STORE ãªã©ï¼‰ã¨ä¸€è‡´ã•ã›ã‚‹
   * - index.html ã«ç›´æ›¸ãã—ãŸããªã„å ´åˆã¯ server å´ã§ /api/config ã‹ã‚‰è¿”ã—ã¦åŸ‹ã‚ã‚‹ã®ãŒç†æƒ³
   */
  const LIFF_ID_ORIGINAL = "2008406620-Bd9Zo9od";
  const LIFF_ID_AKASHA   = "2008406620-G5j1gjzM";
  const LIFF_ID_STORE    = "2008406620-STORE_LIFF_ID_HERE";

  // UIè¦ç´ 
  const modeBadge = document.getElementById("modeBadge");
  const leadText  = document.getElementById("leadText");
  const cardStore = document.getElementById("cardStore");

  // ãƒœã‚¿ãƒ³
  const btnOriginal = document.getElementById("goOriginal");
  const btnAkasha   = document.getElementById("goAkasha");
  const btnStore    = document.getElementById("goStore");

  // ã‚¯ãƒªãƒƒã‚¯é·ç§»ï¼ˆå›ºå®šï¼‰
  btnOriginal.addEventListener("click", function(e){
    e.preventDefault();
    location.href = LIFF_URL_ORIGINAL;
  });
  btnAkasha.addEventListener("click", function(e){
    e.preventDefault();
    location.href = LIFF_URL_AKASHA;
  });
  btnStore.addEventListener("click", function(e){
    e.preventDefault();
    location.href = LIFF_URL_STORE;
  });

  function setModeUI(mode){
    // mode: "delivery" | "store" | "unknown"
    if(mode === "store"){
      cardStore.classList.remove("hidden");
      modeBadge.classList.remove("hidden");
      modeBadge.classList.add("badgeStore");
      modeBadge.textContent = "åº—èˆ—å—å–ãƒ¢ãƒ¼ãƒ‰";
      leadText.textContent = "åº—èˆ—å—å–ï¼ˆç¾é‡‘ï¼‰ã§ã®æ³¨æ–‡ã§ã™ã€‚å•†å“ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚";
    }else if(mode === "delivery"){
      // åº—èˆ—å—å–ã‚«ãƒ¼ãƒ‰ã¯å‡ºã•ãªã„ï¼ˆä¸è¦ãªã‚‰ hidden ã®ã¾ã¾ï¼‰
      modeBadge.classList.remove("hidden");
      modeBadge.textContent = "é…é€ãƒ¢ãƒ¼ãƒ‰";
      leadText.textContent = "ã”å¸Œæœ›ã®å•†å“ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚";
    }else{
      // éLIFFã§é–‹ã„ãŸç­‰
      modeBadge.classList.add("hidden");
      leadText.textContent = "ã”å¸Œæœ›ã®å•†å“ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚";
    }
  }

  // âœ… LIFFã§èµ·å‹•ã•ã‚Œã¦ã„ã‚‹ã‹ & ã©ã® LIFF ã‹ ã‚’åˆ¤å®š
  async function detectModeByLiff(){
    // LIFF SDK ãŒç„¡ã„/ã‚¨ãƒ©ãƒ¼ãªã‚‰ unknown
    if(typeof liff === "undefined" || !liff.init) return { mode:"unknown", liffId:null };

    // ã¾ãšã€ŒLIFFå¤–ã€ã§é–‹ã„ã¦ã‚‹ã¨ init è‡ªä½“ãŒå¤±æ•—ã—ãŒã¡ãªã®ã§ try/catch
    // æˆåŠŸã—ãŸ liffId ã‚’è¦šãˆã‚‹
    const tryIds = [
      { id: LIFF_ID_STORE,    mode: "store" },
      { id: LIFF_ID_ORIGINAL, mode: "delivery" },
      { id: LIFF_ID_AKASHA,   mode: "delivery" },
    ];

    for(const x of tryIds){
      try{
        await liff.init({ liffId: x.id });
        // ã“ã“ã¾ã§æ¥ãŸã‚‰ã€Œã“ã® liffId ã§å‹•ã„ã¦ã„ã‚‹ã€
        return { mode: x.mode, liffId: x.id };
      }catch(e){
        // æ¬¡ã‚’è©¦ã™
      }
    }
    return { mode:"unknown", liffId:null };
  }

  (async()=>{
    const { mode, liffId } = await detectModeByLiff();
    setModeUI(mode);

    // åº—èˆ—å—å–ãƒ¢ãƒ¼ãƒ‰ãªã‚‰ã€Œåº—èˆ—å—å–ãƒœã‚¿ãƒ³ã ã‘è¦‹ã›ãŸã„ã€ãªã©ã‚‚å¯èƒ½
    // ä¾‹ï¼šåº—èˆ—å—å–ãƒ¢ãƒ¼ãƒ‰ã§ã¯é…é€å•†å“ã‚«ãƒ†ã‚´ãƒªã‚’å‡ºã•ãªã„
    if(mode === "store"){
      // ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ»ã‚ã‹ã—ã‚ƒã‚’éš ã—ã¦ã€åº—èˆ—å—å–ã ã‘ã«ã™ã‚‹å ´åˆ
      // document.getElementById("cardOriginal")?.classList.add("hidden");
      // document.getElementById("cardAkasha")?.classList.add("hidden");

      // é€†ã«ã€Œåº—èˆ—å—å–ã§ã‚‚ã‚«ãƒ†ã‚´ãƒªé¸ã°ã›ã‚‹ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«/ã‚ã‹ã—ã‚ƒã‚’åº—èˆ—å—å–ã«æµã™ï¼‰ã€ãªã‚‰
      // goOriginal/goAkasha ã®é·ç§»å…ˆã‚’ storeç”¨ products.html ã«å¤‰ãˆã‚‹â€¦ãªã©ã‚‚å¯èƒ½
    }

    // ãƒ‡ãƒãƒƒã‚°è¡¨ç¤ºã¯ä¸è¦ã¨ã®ã“ã¨ãªã®ã§ console.log ã‚‚ã—ã¾ã›ã‚“
    // ã©ã†ã—ã¦ã‚‚ç¢ºèªã—ãŸã„æ™‚ã ã‘ä¸‹ã®1è¡Œã‚’ä¸€æ™‚çš„ã«æœ‰åŠ¹åŒ–ã—ã¦ãã ã•ã„
    // console.log("mode", mode, "liffId", liffId);
  })();

})();
</script>
</body>
</html>
