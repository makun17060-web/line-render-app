<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>注文確認</title>
  <style>
    :root{
      --bg:#f6f7f9; --card:#fff; --text:#111827; --muted:#6b7280; --border:#e5e7eb;
      --primary:#0b3a53; --danger:#b91c1c; --shadow:0 1px 3px rgba(0,0,0,.08); --radius:14px;
    }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; background:var(--bg); color:var(--text); }
    .wrap{ max-width:720px; margin:0 auto; padding:14px 14px 30px; }
    h1{ font-size:20px; margin:0 0 8px; }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px; margin-bottom:12px; }
    .muted{ color:var(--muted); font-size:13px; line-height:1.7; margin:0; }
    .row{ display:flex; justify-content:space-between; gap:10px; padding:6px 0; font-size:14px; }
    .row strong{ font-weight:900; }
    .hr{ height:1px; background:var(--border); margin:10px 0; }
    .btns{ display:grid; gap:10px; margin-top:12px; }
    button{
      width:100%; border:1px solid transparent; border-radius:14px; padding:14px 14px;
      font-weight:900; font-size:15px; cursor:pointer; box-shadow:var(--shadow);
    }
    .btnBack{ background:#fff; border-color:var(--border); }
    .btnCard{ background:var(--primary); color:#fff; }
    .btnCod{ background:#111827; color:#fff; }
    .btnAddr{ background:#fff; border-color:var(--border); }
    .status{ color:var(--danger); font-weight:800; font-size:13px; white-space:pre-line; margin-top:8px; display:none; }
    .disabled{ opacity:.5; cursor:not-allowed; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>注文確認</h1>

    <div class="card">
      <p class="muted">商品内容を確認してください。支払い方法を選ぶと注文が作成され、カード決済はStripeに遷移します。</p>
      <div id="orderList"></div>
      <div class="hr"></div>
      <div class="row"><span>小計</span><strong id="sumSubtotal">0円</strong></div>
      <div class="row"><span>送料（自動計算）</span><strong id="sumShipping">—</strong></div>
      <div class="row"><span>代引き手数料</span><strong id="sumCod">330円</strong></div>
      <div class="hr"></div>
      <div class="row"><span>合計（カード）</span><strong id="sumTotalCard">—</strong></div>
      <div class="row"><span>合計（代引）</span><strong id="sumTotalCod">—</strong></div>

      <div id="statusMsg" class="status"></div>
    </div>

    <div class="card">
      <p class="muted"><strong>住所登録</strong>が未完了だと決済に進めません（/api/checkout が NO_ADDRESS になります）。</p>
      <div class="btns">
        <button id="btnAddress" class="btnAddr">住所登録を開く（LIFF）</button>
      </div>
    </div>

    <div class="card">
      <div class="btns">
        <button id="btnCard" class="btnCard">カードで支払う（Stripe）</button>
        <button id="btnCod" class="btnCod">代引きで注文する</button>
        <button id="btnBack" class="btnBack">戻る</button>
      </div>
    </div>
  </div>

  <script src="/public/confirm.js"></script>
</body>
</html>
